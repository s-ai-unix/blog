# 技术博客文章写作与发布

## 技能描述

本技能用于在博客项目中创建高质量的技术文章并自动发布。

## 触发条件

当用户请求满足以下条件时触发：
1. 要求写一篇技术文章/博客文章
2. 文章面向懂微积分和线性代数的读者
3. 要求"娓娓道来"的叙事风格
4. 需要纽约客风格的配图
5. 写完后需要发布（执行 deploy.sh）

## 典型触发短语示例

- "写一篇关于XXX的技术文章"
- "给一个懂点微积分和线性代数的人讲XXX"
- "写一篇文章，要求娓娓道来"
- "配个纽约客风格的配图"
- "写完后执行 deploy.sh 发布"

## 执行流程

### 1. 文章规划

- **理解主题**：明确文章要讲解的核心概念
- **评估难度**：确保内容适合懂微积分和线性代数的读者
- **制定大纲**：
  - 引言：从直观例子或历史背景开始
  - 核心概念：循序渐进地介绍
  - 具体应用：给出实际案例
  - 总结：回顾核心要点

### 2. 文章撰写

**风格要求**：
- 娓娓道来：像讲故事一样，从简单到复杂
- 循序渐进：每一步都自然地引出下一步
- 物理直觉：用具体的例子和类比说明抽象概念
- 数学严谨：公式推导清晰，步骤完整

**内容要求**：
- 从零开始：假设读者有微积分和线性代数基础，但不熟悉该主题
- 历史背景：介绍重要概念的历史和发现者
- 核心定义：给出精确的数学定义
- 几何直观：用图形和例子解释
- 具体计算：给出完整的计算示例
- 实际应用：说明该概念在哪些领域有应用

**章节结构建议**：
1. 引言：用生动的例子引入主题
2. 第一章：预备知识（如需要）
3. 第二章：核心概念的引入
4. 第三章：具体计算或应用
4. 第四章：进阶内容或扩展
5. 结语：总结和展望

### 3. 配图

**图片要求**：
- 从 Unsplash 下载高质量的抽象/几何图片
- 风格：纽约客风格（简洁、艺术感、黑白或淡色调）
- 保存位置：`static/images/covers/`
- 命名规范：`[Unsplash photo ID].jpg`

**下载步骤**：
1. 选择合适的 Unsplash 图片 URL
2. 使用 curl 下载到 `static/images/covers/`
3. 检查文件大小（确保 > 10KB，避免下载失败）

### 4. 创建文章文件

**文件位置**：`content/posts/YYYY-MM-DD-[slug].md`

**Front Matter 格式**：
```yaml
---
title: "文章标题"
date: YYYY-MM-DDTHH:mm:ss+08:00
draft: false
description: "文章简介，1-2句话概括"
categories: ["分类1", "分类2"]
tags: ["标签1", "标签2", "标签3"]
cover:
    image: "images/covers/[图片文件名].jpg"
    alt: "图片描述"
    caption: "图片标题"
---
```

**命名规范**：
- 日期使用当前日期
- slug 使用英文，用连字符分隔
- 示例：`2026-01-13-christoffel-symbols-guide.md`

### 5. 数学公式（严格执行 LaTeX 规范）

**基本原则**：
- **所有**数学符号和变量**必须**包裹在数学模式中（`$...$` 或 `$$...$$`）
- 禁止在文本中直接使用数学符号（如 x, y, w, b, ∈, ×, → 等）
- 确保公式在 Markdown 编辑器和 MathJax 中都能正确渲染

**数学模式使用**：
- **行内公式**：`$公式$`（在段落��使用）
- **独立公式**：`$$公式$$`（单独一行，居中显示）
- **所有数学变量**：必须包裹，包括单个字母（如 `$x$`, `$y$`, `$w$`, `$b$`）

**必须遵守的 LaTeX 规范**：

1. **变量和标量**：
   - ✅ 正确：`$x$`, `$y$`, `$w_i$`, `$b$`
   - ❌ 错误：`x`, `y`, `w_i`, `b`（未包裹）

2. **向量**：
   - ✅ 正确：`$\mathbf{x}$`, `$\mathbf{w}$`, `$\vec{v}$`
   - ❌ 错误：`x`, `w`, `v`

3. **上标和下标**：
   - ✅ 正确：`$x^{(1)}$`, `$w_{ij}$`, `$\sigma'$`, `$f_t$`
   - ⚠️ 可以：`$x^2$`, `$W^T$`（单个字符可以不用花括号）
   - ❌ 错误：`$x^(1)$`, `$w_ij$`, `f_t`（未包裹）

4. **希腊字母**：
   - ✅ 正确：`$\alpha$`, `$\beta$`, `$\sigma$`, `$\delta$`, `$\theta$`
   - ❌ 错误：`α`, `β`, `σ`, `δ`, `θ`（直接使用 Unicode）

5. **特殊符号**：
   - ✅ 正确：`$\times$`（乘法）, `$\to$`（箭头）, `$\in$`（属于）
   - ✅ 正确：`$\mathbb{R}$`（实数集）, `$\subset$`（子集）, `$\neq$`（不等）
   - ❌ 错误：`×`, `→`, `∈`, `R`（直接使用 Unicode 或未包裹）

6. **分数和导数**：
   - ✅ 正确：`$\frac{\partial f}{\partial x}$`, `$\frac{a}{b}$`
   - ✅ 正确：`$f'(x)$`, `$\frac{dy}{dx}$`
   - ❌ 错误：`∂f/∂x`, `dy/dx`（未包裹）

7. **集合和区间**：
   - ✅ 正确：`$\{1, 2, 3\}$`, `$[0, 1]$`, `$\mathbb{R}^d$`
   - ❌ 错误：`{1, 2, 3}`, `[0, 1]`, `R^d`（未包裹或花括号未转义）

8. **矩阵**：
   - ✅ 正确：`$\begin{pmatrix} a & b \\ c & d \end{pmatrix}$`
   - ✅ 正确：`$\begin{bmatrix} 1 & 0 \\ 0 & 1 \end{bmatrix}$`

9. **积分和求和**：
   - ✅ 正确：`$\int_a^b f(x) dx$`, `$\sum_{i=1}^{n} x_i$`
   - ❌ 错误：`∫`, `Σ`（直接使用 Unicode）

10. **表格中的数学**：
    - ✅ 正确：`| $x_1$ | $x_2$ | $x_1 + x_2$ |`
    - ❌ 错误：`| x_1 | x_2 | x_1 + x_2 |`

**常见错误示例及修复**：

| 错误写法 | 正确写法 | 原因 |
|---------|---------|------|
| `x = (x_1, x_2, ..., x_d)^T` | `$\mathbf{x} = (x_1, x_2, \ldots, x_d)^T$` | 未包裹，省略号格式错误 |
| `权重 w_i` | `权重 $w_i$` | 变量未包裹 |
| `训练样本 (x_i, y_i)` | `训练样本 $(\mathbf{x}_i, y_i)$` | 未包裹 |
| `y ∈ {−1, +1}` | `$y \in \{-1, +1\}$` | 未包裹，花括号未转义 |
| `输入 → 隐藏层 → 输出层` | `输入 $\to$ 隐藏层 $\to$ 输出层` | 箭头未包裹 |
| `W ∈ R^(m×n)` | `$W \in \mathbb{R}^{m \times n}$` | 未包裹，符号格式错误 |
| `32×32 图像` | `$32 \times 32$ 图像` | 乘号未包裹 |
| `α_{ij} = 0.5` | `$\alpha_{ij} = 0.5$` | 希腊字母未包裹 |
| `f_t 接近 1` | `$f_t$ 接近 1` | 下标变量未包裹 |

**最佳实践**：

1. **编写公式时的检查清单**：
   - [ ] 所有数学变量是否都用 `$...$` 或 `$$...$$` 包裹？
   - [ ] 上标是否用 `^{...}` 而非 `^(...)`？
   - [ ] 下标是否用 `_{...}` 而非 `_(...)`？
   - [ ] 希腊字母是否用 LaTeX 命令（如 `\alpha`）而非 Unicode？
   - [ ] 特殊符号（×, →, ∈ 等）是否用 LaTeX 命令？
   - [ ] 花括号在文本中是否转义为 `\{` 和 `\}`？
   - [ ] 向量是否用 `\mathbf{}` 或 `\vec{}` 标记？

2. **常见模板**：
   - 函数定义：`$f: \mathbb{R}^n \to \mathbb{R}^m$`
   - 向量：`$\mathbf{x} = (x_1, x_2, \ldots, x_n)^T$`
   - 矩阵维度：`$W \in \mathbb{R}^{m \times n}$`
   - 求和：`$\sum_{i=1}^{n} x_i$`
   - 梯度：`$\nabla f(\mathbf{x})$`
   - 偏导数：`$\frac{\partial f}{\partial x_i}$`
   - 激活函数：`$\sigma(z) = \frac{1}{1 + e^{-z}}$`
   - Softmax：`$\text{softmax}(z)_i = \frac{e^{z_i}}{\sum_{j=1}^{c} e^{z_j}}$`

3. **测试验证**：
   - 在支持 MathJax 的 Markdown 编辑器中预览
   - 检查浏览器控制台是否有 MathJax 错误
   - 确保所有公式正确渲染，没有显示为源代码

### 6. 发布流程

**步骤**：
1. 下载图片（如果还没有）：
   ```bash
   curl -sL "[Unsplash URL]" -o static/images/covers/[filename].jpg --max-time 30 --retry 3
   ```

2. 提交更改：
   ```bash
   git add content/posts/[文章文件].md static/images/covers/[图片文件].jpg
   git commit -m "Add [文章标题]"
   git push origin main
   ```

3. 执行部署脚本：
   ```bash
   bash deploy.sh
   ```

**验证**：
- 确认文章文件已创建
- 确认图片文件已下载且大小正常（>10KB）
- 确认 git 提交成功
- 确认 deploy.sh 执行成功
- 提供博客地址：https://s-ai-unix.github.io/blog/

## 注意事项

### 图片处理
- Unsplash 图片可能失效，下载后必须检查文件大小
- 如果下载失败，使用现有的图片替代
- 不要在文章中使用外链图片（必须下载到本地）

### Git 操作
- 每次部署前先 git pull 确保同步
- 提交信息要清晰
- 如果 deploy.sh 失败，检查 Hugo 构建输出

### 内容质量
- **数学公式规范**（最重要！）：
  - 所有数学变量必须用 `$...$` 或 `$$...$$` 包裹
  - 使用 LaTeX 命令而非 Unicode 字符（如 `\alpha` 而非 `α`）
  - 上标下标格式：`^{...}` 和 `_{...}`，而非 `^(...)` 和 `_(...)`
  - 特殊符号必须在数学模式中（如 `$\to$`, `$\in$`, `$\times$`）
- 确保公式推导正确且完整
- 避免过于简略的推导
- 提供具体的数值例子
- 在关键概念处给出几何直观
- 文章完成后使用 `hugo --quiet` 验证构建

### 常见错误

**错误1：图片 404**
- 症状：文件很小（<1KB）
- 解决：下载到本地或使用现有图片

**错误2：Hugo 构建失败**
- 症状：deploy.sh 报错
- 解决：检查 markdown 语法，特别是 YAML front matter

**错误3：数学公式不显示或渲染错误**
- 症状1：公式显示为原始代码（如 `$x$`）
  - 解决：确保使用正确的分隔符（行内 `$...$`，块级 `$$...$$`）
- 症状2：浏览器控制台报错 "Missing open brace for superscript"
  - 解决：检查上标格式，使用 `^{...}` 而非 `^(...)`
  - 解决：检查连���符，在下标中使用 `1{-}NN` 或 `1NN` 而非 `1-NN`
- 症状3：希腊字母或特殊符号显示异常
  - 解决：使用 LaTeX 命令（`\alpha`, `\sigma`）而非 Unicode 字符
  - 解决：确保符号在数学模式中（如 `$\alpha$` 而非 `α`）
- 症状4：部分变量未渲染
  - 解决：检查是否所有数学变量都用 `$...$` 包裹
  - 解决：确保不要在文本中直接使用数学符号（如 `x`, `y`, `→`, `∈`）

**错误4：MathJax 解析失败**
- 症状：浏览器控制台有 MathJax 错误
- 常见原因：
  1. 未闭合的 `$` 或 `$$`
  2. 在数学模式中使用了未转义的特殊字符（如 `#`, `%`, `&`）
  3. 上标/下标格式错误（`^(...)` 应为 `^{...}`）
  4. 连字符在下标中导致歧义（`1-NN` 应为 `1{-}NN` 或 `1NN`）
- 解决：使用 `hugo --quiet` 测试，检查构建输出

## 成功标准

文章完成并发布后，应满足：
1. ✅ 文章内容完整，逻辑清晰
2. ✅ 数学公式正确渲染
3. ✅ 配图显示正常
4. ✅ 文章已提交到 git
5. ✅ deploy.sh 执行成功
6. ✅ 博客页面可以正常访问
